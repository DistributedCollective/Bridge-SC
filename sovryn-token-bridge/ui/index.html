<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Libraries CSS Files -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.css" integrity="sha384-Ex0vLvgbKZTFlqEetkjk2iUgM+H5udpQKFKjBoGFwPaHRGhiWyVI6jLz/3fBm5ht" crossorigin="anonymous">
        <link rel="stylesheet" href="https://developers.rsk.co/assets/vendor/malihu-custom-scrollbar-plugin-master/malihu-custom-scrollbar-plugin-master/jquery.mCustomScrollbar.css"  integrity="sha384-CYaEEtxzTAPwgXImMFjvDG8NlVsVmTew5NzIxq4MbFYF+wIzEcbPmkEa4iWMqVN3" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css" integrity="sha384-2SvkxRa9G/GlZMyFexHk+WN9p0n2T+r38dvBmw5l2/J3gjUcxs9R1GwKs0seeSh3" crossorigin="anonymous">

        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href="https://developers.rsk.co/assets/vendor/bootstrap/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- Favicons -->
        <link rel="apple-touch-icon" sizes="180x180" href="https://developers.rsk.co/assets/img/favicons/apple-touch-icon.png" crossorigin="anonymous">
        <link rel="icon" type="image/png" sizes="32x32" href="https://developers.rsk.co/assets/img/favicons/favicon-32x32.png" crossorigin="anonymous">
        <link rel="icon" type="image/png" sizes="16x16" href="https://developers.rsk.co/assets/img/favicons/favicon-16x16.png" crossorigin="anonymous">
        <link rel="shortcut icon" href="https://developers.rsk.co/assets/img/favicons/favicon.ico" crossorigin="anonymous">

        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;700&family=Rubik&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

        <!-- Main Stylesheet File -->
        <link href="https://developers.rsk.co/assets/css/styles.css" rel="stylesheet">
        <link href="https://developers.rsk.co/assets/css/styles_dark.css" rel="stylesheet" disabled="">
        <link href="https://developers.rsk.co/assets/css/code.css" rel="stylesheet">

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-170082381-1"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-170082381-1');
        </script>

        <!-- SEO -->
        <title>Token Bridge between RSK and Ethereum</title>
        <meta name=”description” content=”The Token Bridge  between RSK and Ethereum allows to cross ERC20 tokens back and forth between the two blockchains.”>
        <meta name="keywords" content="Token, Bridge, RSK, Ethereum, blockchain, token, crypto, ERC20">
        <meta name="author" content="RSK">
        <!-- Hotjar Tracking Code for https://tokenbridge.rsk.co/ -->
        <script>
            (function(h,o,t,j,a,r){
                h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
                h._hjSettings={hjid:1893104,hjsv:6};
                a=o.getElementsByTagName('head')[0];
                r=o.createElement('script');r.async=1;
                r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
                a.appendChild(r);
            })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
        </script>
        <!-- Custom Styles -->
        <style>
            body {
              font-family: 'Quicksand', sans-serif !important;
              font-size: 12px!important;
            }
            body .btn {
                font-size: 14px;
            }
            h5 {
                font-size: 25px;
                line-height: 31px;
            }
            h1 {
              color: #00B520;
              font-weight: 700;
              font-size: 36px;
              line-height: 45px;
              margin-top: 25px;
            }
            .align-center {
                margin-left: auto;
                margin-right: auto;
            }
            #transferTab {
                max-width: 660px;
                margin-bottom: 30px;
                padding: 40px 20px;
            }
            .form-control:disabled {
                background-color: transparent;
                color: #BFBDBD;
            }
            label {
                font-weight: 500;
                font-size: 12px;
                line-height: 15px;
                color: #BFBDBD;
                margin-bottom: 0px;
            }
            .max {
                color: #00B520;
            }
            .network {
                color: #00B520;
                font-size: 20px;
                font-weight: 500;
                line-height: 25px;
                margin-bottom: 20px;
            }
            .bootstrap-select .dropdown-toggle .filter-option {
                font-family: 'Quicksand';
                font-size: 20px;
                line-height: 25px;
                text-align: center;
            }
            .dropdown-item, .form-control-plaintext {
                font-family: 'Quicksand';
                font-size: 20px;
                line-height: 25px;
            }
            .fees {
                font-family: 'Roboto';
                font-size: 14px;
                line-height: 30px;
                color: #919191;
            }
            .black {
                color: #000;
                font-weight: bold;
            }
            #amount {
                font-size: 18px;
                line-height: 22px;
            }
            #amount.ok {
                border-color: #00B520;;
            }
            .invalid-feedback {
                font-size: 12px;
            }
            .inputs-area {
                font-family: 'Quicksand';
                font-size: 20px;
                line-height: 25px;
                border: 1px solid #000000;
                box-sizing: border-box;
                border-radius: 10px;
                padding: 2px;
            }
            .outline {
                border: 1px solid #000;
            }
            .outline, .outline-rounded, .badge-outline {
                background-color: transparent;
                line-height: 1.5;
                padding-right: .6em;
                padding-left: .6em;
            }
            .outline-rounded, .badge-outline {
                border: 1px solid #00B520;
            }
            .disabled, .disabled .network, .max:disabled {
                color: #E5E5E5;
            }
            .disabled .outline, .disabled .outline-rounded, .disabled .badge-outline,
            .outline:disabled, .outline-rounded:disabled, .badge-outline:disabled {
                color: #E5E5E5;
                border: 1px solid #E5E5E5;
            }
            .outline-rounded {
                color: #00B520;
                border-radius: .6em;
                padding: .375rem .75rem;
            }
            .badge-outline {
                color: #00B520;
                border-radius: 10rem;
                padding: .375rem .75rem;
            }
            .btn-light, .btn-light.disabled, .btn-light.disabled,
            .show>.btn-light.dropdown-toggle {
                background-color: transparent;
                border-color: transparent;
            }
            .btn-light:hover {
                background-color: transparent;
            }
            .bootstrap-select>.dropdown-toggle.bs-placeholder:hover,
            .bootstrap-select>.dropdown-toggle.bs-placeholder {
                color: #000;
            }
            .dropdown.bootstrap-select.disabled > .disabled {
                color: #BFBDBD;
            }

            .btn-primary {
                font-family: 'Quicksand';
                color: #fff;
                background-color: #00B520;
                border-color: #00B520;
                border-radius: 10px;
            }
            .btn-primary:hover, .btn-primary:not(:disabled):not(.disabled):active {
                color: #fff;
                background-color: #03a335;
                border-color: #03a335;
            }
            .btn-primary.disabled, .btn-primary:disabled {
                color: #fff;
                background-color:  #E5E5E5;
                border-color:  #E5E5E5;
            }
            .navbar-dark.bg-dark {
                background-color: white!important;
            }
            input::placeholder {
              color: grey !important;
              font-weight: normal;
            }
            #home {
              padding-top: 30px;
              padding-bottom: 30px;
            }
            #footer {
              margin-top: 0;
            }
            .title {
              text-align: center;
              margin-bottom: 30px;
            }
            .subtitle {
              text-align: center;
              margin-bottom: 5px;
            }
            .logo {
                width: 106px;
                height: auto;
                transition: all 0.5s ease;
            }
            .navbar, .navbar a {
                font-family: 'Rubik';
                color: #00B520;
                font-size: 14px;
            }
            a:hover {
                color: #03a335;
                text-decoration: none;
            }
            .navbar-item {
                margin-top: 15px;
            }
            .nav-tabs .nav-link {
                font-weight: bold;
                color: #00B520;
            }
            .nav-tabs .nav-link:hover {
                color: black;
            }
            .config-section {
              display: flex;
              flex-direction: column;
              align-items: center;
              text-align: center;
            }
            .config-section .config-value {
              font-size: 36px;
              font-weight: bold;
              color: #00B520;
            }
            .config-section .config-title {
              font-weight: bold;
            }
            .config-section .config-address {
              font-size: 13px;
              color: #00B520;
              font-weight: bold;
            }
            .fed-addresses {
                text-align: left;
                display: block;
            }
            .config-section p {
              font-size: 11px;
              line-height: 14px;
              margin: 0 20px;
            }
            #tokenListTab {
                font-size: 13px;
                max-width: 500px;
                margin-bottom: 110px;
                margin-top: 25px;
            }
            .tab-content .col-sm-10, .tab-content .col-sm-9, .tab-content .col-sm-8, .tab-content .col-sm-7, .tab-content .col-sm-6,
            .tab-content .col-sm-4, .tab-content .col-sm-3, .tab-content .col-sm-2, .tab-content .col-sm-2, .tab-content .col-sm-1
            {
              padding-right: 0;
              padding-left: 0;
            }
            #tokenListTab .btn{
              font-size: 14px;
              padding: 0px;
            }
            #tokenListTab a {
                color: #000;
            }
            @keyframes lds-circle {
                0%, 100% {
                    animation-timing-function: cubic-bezier(0.5, 0, 1, 0.5);
                }
                0% {
                    transform: rotateY(0deg);
                }
                50% {
                    transform: rotateY(1800deg);
                    animation-timing-function: cubic-bezier(0, 0.5, 0.5, 1);
                }
                100% {
                    transform: rotateY(3600deg);
                }
            }
            .indicator span {
                position: relative;
                margin-left: 5px;
                padding-left: 3px;
            }
            .indicator.btn-outline-danger span:before {
                background-color: #dc3545;
            }
            .indicator span:before {
                position: absolute;
                right: 98%;
                top: 50%;
                -webkit-transform: translate(-5px,-50%);
                transform: translate(-5px,-50%);
                content: "";
                display: block;
                width: 6px;
                height: 6px;
                border-radius: 50%;
                background: #40d512;
            }
            .token-logo {
                width: 1.2rem;
                height: 1.2rem;
                margin-right: 0.5rem;
            }
            .dropup .dropdown-toggle::after {
                content: "\f106";
                font-family: 'Font Awesome 5 Free';
                font-weight: 900;
                border: 0;
            }
            .dropdown-toggle::after {
                content: "\f107";
                font-family: 'Font Awesome 5 Free';
                font-weight: 900;
                border: 0;
                display: inline-block;
                vertical-align: .255em;
            }
            .bootstrap-select>.dropdown-toggle:after {
                margin-top: 0px;
                font-size: 20px;
                vertical-align: middle;
                line-height: 25px;
                text-align: center;
            }
            #wait {
                font-family: 'Rubik';
                font-size: 16px;
                line-height: 19px;
                color: #919191;
            }
            #txBridge, #txBridge:hover {
                font-family: 'Rubik';
                font-size: 12px;
                line-height: 14px;
                color: #919191;
            }
            #success {
                padding: 0px;
                max-width: 222px;
            }

            /*Spinner*/
            .sk-fading-circle {
            margin: 40px auto;
            width: 80px;
            height: 80px;
            position: relative;
            }

            .sk-fading-circle .sk-circle {
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            }

            .sk-fading-circle .sk-circle:before {
            content: '';
            display: block;
            margin: 0 auto;
            width: 15%;
            height: 15%;
            background-color: #333;
            border-radius: 100%;
            -webkit-animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;
                    animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;
            }
            .sk-fading-circle .sk-circle2 {
            -webkit-transform: rotate(30deg);
                -ms-transform: rotate(30deg);
                    transform: rotate(30deg);
            }
            .sk-fading-circle .sk-circle3 {
            -webkit-transform: rotate(60deg);
                -ms-transform: rotate(60deg);
                    transform: rotate(60deg);
            }
            .sk-fading-circle .sk-circle4 {
            -webkit-transform: rotate(90deg);
                -ms-transform: rotate(90deg);
                    transform: rotate(90deg);
            }
            .sk-fading-circle .sk-circle5 {
            -webkit-transform: rotate(120deg);
                -ms-transform: rotate(120deg);
                    transform: rotate(120deg);
            }
            .sk-fading-circle .sk-circle6 {
            -webkit-transform: rotate(150deg);
                -ms-transform: rotate(150deg);
                    transform: rotate(150deg);
            }
            .sk-fading-circle .sk-circle7 {
            -webkit-transform: rotate(180deg);
                -ms-transform: rotate(180deg);
                    transform: rotate(180deg);
            }
            .sk-fading-circle .sk-circle8 {
            -webkit-transform: rotate(210deg);
                -ms-transform: rotate(210deg);
                    transform: rotate(210deg);
            }
            .sk-fading-circle .sk-circle9 {
            -webkit-transform: rotate(240deg);
                -ms-transform: rotate(240deg);
                    transform: rotate(240deg);
            }
            .sk-fading-circle .sk-circle10 {
            -webkit-transform: rotate(270deg);
                -ms-transform: rotate(270deg);
                    transform: rotate(270deg);
            }
            .sk-fading-circle .sk-circle11 {
            -webkit-transform: rotate(300deg);
                -ms-transform: rotate(300deg);
                    transform: rotate(300deg);
            }
            .sk-fading-circle .sk-circle12 {
            -webkit-transform: rotate(330deg);
                -ms-transform: rotate(330deg);
                    transform: rotate(330deg);
            }
            .sk-fading-circle .sk-circle2:before {
            -webkit-animation-delay: -1.1s;
                    animation-delay: -1.1s;
            }
            .sk-fading-circle .sk-circle3:before {
            -webkit-animation-delay: -1s;
                    animation-delay: -1s;
            }
            .sk-fading-circle .sk-circle4:before {
            -webkit-animation-delay: -0.9s;
                    animation-delay: -0.9s;
            }
            .sk-fading-circle .sk-circle5:before {
            -webkit-animation-delay: -0.8s;
                    animation-delay: -0.8s;
            }
            .sk-fading-circle .sk-circle6:before {
            -webkit-animation-delay: -0.7s;
                    animation-delay: -0.7s;
            }
            .sk-fading-circle .sk-circle7:before {
            -webkit-animation-delay: -0.6s;
                    animation-delay: -0.6s;
            }
            .sk-fading-circle .sk-circle8:before {
            -webkit-animation-delay: -0.5s;
                    animation-delay: -0.5s;
            }
            .sk-fading-circle .sk-circle9:before {
            -webkit-animation-delay: -0.4s;
                    animation-delay: -0.4s;
            }
            .sk-fading-circle .sk-circle10:before {
            -webkit-animation-delay: -0.3s;
                    animation-delay: -0.3s;
            }
            .sk-fading-circle .sk-circle11:before {
            -webkit-animation-delay: -0.2s;
                    animation-delay: -0.2s;
            }
            .sk-fading-circle .sk-circle12:before {
            -webkit-animation-delay: -0.1s;
                    animation-delay: -0.1s;
            }

            /* this is added because rLogin is wrongly displayed */
            .navbar {
                position: inherit;
            }

            @-webkit-keyframes sk-circleFadeDelay {
            0%, 39%, 100% { opacity: 0; }
            40% { opacity: 1; }
            }

            @keyframes sk-circleFadeDelay {
            0%, 39%, 100% { opacity: 0; }
            40% { opacity: 1; }
            }
        </style>
    </head>
    <body>
        <section id="main">
            <!-- Navigation -->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="container">
                    <a class="navbar-brand" href="https://rsk.co">
                        <img id="logo" src="https://developers.rsk.co/assets/img/rsk_logo.svg" class="logo" alt="RSK Token Bridge">
                    </a>
                    <div class="wallet-status navbar-item indicator badge-outline badge-pill" style="display: none;">
                        <span aria-describedby="tooltip-status" class="fromNetwork">Network</span>
                    </div>
                    <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="navbar-collapse collapse" id="navbarResponsive">
                        <div class="wallet-status navbar-item badge-pill text-truncate" style="width: 85px; display: none;">
                            <span id="address">0x123456789</span>
                        </div>
                        <div class="navbar-item ml-auto" >
                            <button id="logIn" type="button" class="btn btn-primary badge-pill">
                                Connect wallet
                            </button>
                            <a id="help" href="https://gitter.im/rsksmart/tokenbridge#" style="display: none;">
                                Do you need help?
                            </a>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="navbar_bottom_shape"></div>
            <section id="home">
              <div class="container">
                <div class="title">
                    <h1 id="title">RSK bridges with Ethereum</h1>
                    <h5 class="subtitle">You can convert your tokens from RSK to Ethereum and viceversa.</h5>
                </div>
                <div id="transferTab" class=" align-center disabled">
                    <div class="row justify-content-center network">
                        <div class="col-4 text-center">
                            <span class="fromNetwork">From Network</span>
                        </div>
                        <div class="col-4 col-md-3 text-center">
                            <span id="changeNetwork" class="outline-rounded" style="padding-left: 1.5rem; padding-right: 1.5rem;">
                                <i class="fas fa-exchange-alt"></i>
                            </span>
                        </div>
                        <div class="col-4 text-center">
                            <span class="toNetwork">To Network</span>
                        </div>
                    </div>
                    <form id="crossForm" name="crossForm">
                        <div class="row justify-content-center inputs-area mb-3">
                            <div class="col-4 text-center">
                                <label class="tokenAddress-label" for="tokenAddress">You own</label>
                                <div class="input-group">
                                    <select class="selectpicker" id="tokenAddress" name="tokenAddress" data-width="100%" title="Select token" disabled required>
                                        <!-- Dinamic content made with JS -->
                                    </select>
                                </div>
                                <div class="invalid-feedback"></div>
                            </div>
                            <div class="col-4 col-md-3 text-center">
                                <label class="amount-label" for="amount"><a id="max" class="max">Max</a></label>
                                <div class="form-group amount">
                                    <input name="amount" id="amount" class="outline form-control text-center align-center" placeholder="Amount" required>
                                    <div class="invalid-feedback"></div>
                                </div>
                            </div>
                            <div class="col-4 text-center">
                                <div class="form-group willReceive">
                                    <label class="willReceive-label" for="willReceive">You will receive</label>
                                    <div class="input-group">
                                        <div class="form-control-plaintext" id="willReceive" name="willReceive">
                                            <span id="willReceiveToken" class="willReceiveToken" name="willReceiveToken"></span>
                                        </div>
                                        <!-- <div class="input-group-append">
                                            <button id="willReceive-copy" style="display:none;" class="copy btn btn-outline-secondary" type="button" data-clipboard-text="" data-toggle="tooltip" data-placement="bottom" title="Copy the address">
                                                <i class="far fa-copy"></i>
                                            </button>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="fees text-center mt-2" style="display:none">
                            <p>Service fee: <span id="serviceFee"></span> <span class="selectedToken"></span></p>
                            <p>Total cost: <span class="black"><span id="totalCost"></span> <span class="selectedToken"></span></span></p>
                        </div>
                        <div class="row justify-content-center">
                            <button id="cross" type="submit" class="btn btn-primary mt-3 mb-3">Convert tokens</button>
                        </div>
                        <div class="fees mt-3 align-center text-center" style="max-width:350px; line-height: 16px; display:none;">
                            <div>Your wallet will open and you will be asked to confirm the first of two transactions required for the bridge.</div>
                        </div>
                        <div id="wait" class="mt-3 align-center text-center" style="max-width:350px; line-height: 16px; display:none;">
                            <!-- Spinner <div class="spinner-border mb-4" style="height:70px; width:70px"></div> -->
                            <!-- https://tobiasahlin.com/spinkit/ -->
                            <div class="sk-fading-circle">
                                <div class="sk-circle1 sk-circle"></div>
                                <div class="sk-circle2 sk-circle"></div>
                                <div class="sk-circle3 sk-circle"></div>
                                <div class="sk-circle4 sk-circle"></div>
                                <div class="sk-circle5 sk-circle"></div>
                                <div class="sk-circle6 sk-circle"></div>
                                <div class="sk-circle7 sk-circle"></div>
                                <div class="sk-circle8 sk-circle"></div>
                                <div class="sk-circle9 sk-circle"></div>
                                <div class="sk-circle10 sk-circle"></div>
                                <div class="sk-circle11 sk-circle"></div>
                                <div class="sk-circle12 sk-circle"></div>
                            </div>
                            <div class="mt-2">
                                Wait for aproximately <b><span id="secondsPerBlock">X</span> seconds:</b>
                                the waiting period is required to confirm the transaction on the blockchain.
                                Please <b>do not close this tab</b> until the process has finished.
                            </div>
                        </div>

                        <div id="success" class="mt-3 align-center text-center alert alert-dismissible fade show" style="display:none;">
                            <div class="outline-rounded">
                                <div style="font-size: 32px;"><i class="fas fa-check"></i></div>
                                <div>You will receive <span id="receive" class="black">126 rKovDAI</span> in your wallet in aproximately <span id="confirmationTime">X minutes</span></div>
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <!-- <div class="mt-2" style="line-height: 16px;">
                                <a id="txBridge" target="_blank" href="#">Check it on the explorer</a>
                            </div> -->
                        </div>
                        <div class="mt-3">
                            <div id="alert-danger" class="alert alert-danger alert-dismissible fade show" role="alert" style="display:none">
                                <h4 class="alert-heading">Ups! there was an error</h4>
                                <p id="alert-danger-text"></p>
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                            </div>
                        </div>
                    </form>
                </div> <!--End of transferTab-->

                <div id="tokensTab">
                    <h5 class="subtitle">Token bridge list</h5>
                    <p class="text-center">RSK native tokens will transform into e(tokenName). Ethereum native tokens will transform into r(tokenName)</p>
                    <div id="tokenListTab" class="align-center">
                        <!-- Dinamic content made with JS -->
                    </div>
                </div>

                <div id="infoTab">
                    <h5 class="subtitle">Important details</h5>
                    <div class="row mb-5">
                        <div class="col-md-4 col-sm-4 mb-5 config-section">
                            <span class="config-value mb-2" id="config-max">-</span>
                            <span class="config-title">Max transfer allowed</span>
                            <p>
                                The max value of tokens that can be tranferred per day
                            </p>
                        </div>
                        <div class="col-md-4 col-sm-4 mb-5 config-section">
                            <span class="config-value mb-2" id="config-min">-</span>
                            <span class="config-title">Min transfer allowed</span>
                            <p>
                                The min value of tokens that can be transferred per day
                            </p>
                        </div>
                        <div class="col-md-4 col-sm-4 mb-5 config-section">
                            <span class="config-value mb-2" id="config-to-spend">-</span>
                            <span class="config-title">Daily transfer limit</span>
                            <p>
                                How many tokens can be tranferred today
                            </p>
                        </div>
                        <div class="col-md-4 col-sm-4 mb-5 config-section">
                            <span class="config-value mb-2" id="config-fee">-</span>
                            <span class="config-title">Fee</span>
                            <p>
                                This is the fee required for transfer tokens between networks
                            </p>
                        </div>
                        <div class="col-md-4 col-sm-4 mb-5 config-section">
                            <div>
                                <span class="config-value mb-2" id="config-federators-count">-</span>
                                <span class="config-address mb-2 ml-2" id="config-federators-required"></span>
                            </div>
                            <span class="config-title">Federators</span>
                            <p>
                                The Authorities will vote the transactions to cross during the trial period. Once we implement the decentralized bridge there will be no authorities as its a fully trustless solution
                            </p>
                        </div>
                        <div class="col-md-4 col-sm-4 mb-5 config-section">
                            <span class="config-value mb-2" id="config-whitelisted-enabled">-</span>
                            <span class="config-title">Whitelisted contracts</span>
                            <p>
                                The whitelist will be used during the trial period once the decentralized bridge is released the whitelist will be removed
                            </p>
                        </div>
                    </div>
                </div>
            </div> <!--- End Tab Content -->
          </div>
        </section>
        <!-- Modal -->
        <div id="myModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Connect wallet</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                    </div>
                </div>
            </div>
        </div>
        <footer id="footer" class="section-bg">
            <div class="footer-top">
            <div class="container">
               <div class="row">
                  <div class="col-lg-12">
                     <img src="https://www.rsk.co/img/powered_by_iov.svg" class="img-fluid powered_by">
                  </div>
               </div>
               <div class="row">
                  <div class="col-lg-6">
                     <div class="row">
                        <div class="col-sm-7">
                           <div class="footer-info">
                              <p>Rsk is the most secure smart contract network in the world and enables decentralized applications secured by the Bitcoin Network to empower people and improve the quality of life of millions.</p>
                              <br/>
                              <a href="https://developers.rsk.co/" rel="nofollow noopener noreferrer" target="_blank" class="footer-button rounded" title="Start now">Start now</a>
                           </div>
                        </div>
                        <div class="col-sm-5"></div>
                     </div>
                  </div>
                  <div class="col-lg-6">
                     <div class="row">
                        <div class="col-md-6">
                           <div class="footer-links">
                              <ul>
                                 <li><a href="https://developers.rsk.co/tools/tokenbridge/dappguide" target="_blank">How to use it?</a></li>
                                 <li><a href="https://developers.rsk.co/tools/tokenbridge/faq/">FAQ</a></li>
                                 <li><a href="https://github.com/rsksmart/tokenbridge" target="_blank">Repository</a></li>
                                 <li><a id="get-rbtc-navlink" href="https://coinswitch.rsk.co/" target="_blank">Get RBTC</a></li>
                                 <li><a id="network-navlink" href="https://testnet.tokenbridge.rsk.co">Use Testnet</a></li>
                                 <li><a href="https://developers.rsk.co/tools/tokenbridge" rel="nofollow noopener noreferrer" target="_blank" class="footer-button" title="Documentation">Documentation</a></li>
                              </ul>
                           </div>
                        </div>
                        <div class="col-md-6">
                           <div class="footer-links">
                              <ul>
                                <li><a href="https://www.iovlabs.org" rel="nofollow noopener noreferrer" target="_blank">About IOVlabs</a></li>
                                <li><a href="https://www.iovlabs.org/contact.html" rel="nofollow noopener noreferrer" target="_blank">Contact IOVlabs</a></li>
                                <li><a href="https://blog.rsk.co/" rel="nofollow noopener noreferrer" target="_blank">Blog</a></li>
                                <li><a class="bold" href="https://www.rsk.co/Brand_Guidelines/RSK_BrandManual_V6.pdf" rel="nofollow noopener noreferrer" target="_blank">Brand Guidelines</a></li>
                                <li><a class="bold" href="https://www.rsk.co/terms-conditions">Terms &amp; Conditions</a></li>
                                <li><a class="bold mb-30" href="https://www.rsk.co/privacy-policy">Privacy Policy</a></li>
                              </ul>
                           </div>
                        </div>
                     </div>
                     <div class="social-links">
                        <a href="https://twitter.com/rsksmart" rel="nofollow noopener noreferrer" target="_blank" class="twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.youtube.com/rsksmart" rel="nofollow noopener noreferrer" target="_blank" class="facebook"><i class="fab fa-youtube"></i></a>
                        <a href=" https://www.facebook.com/RSKsmart/" rel="nofollow noopener noreferrer" target="_blank" class="linkedin"><i class="fab fa-facebook"></i></a>
                        <a href="https://gitter.im/rsksmart" rel="nofollow noopener noreferrer" target="_blank" class="instagram"><i class="fab fa-gitter"></i></a>
                        <a href="https://www.reddit.com/r/rootstock/" rel="nofollow noopener noreferrer" target="_blank" class="instagram"><i class="fab fa-reddit"></i></a>
                        <a href="https://t.me/rskofficialcommunity" rel="nofollow noopener noreferrer" target="_blank" class="instagram"><i class="fab fa-telegram"></i></a>
                        <a href="https://medium.com/@RSKNews" rel="nofollow noopener noreferrer" target="_blank" class="instagram"><i class="fab fa-medium"></i></a>
                        <a href="https://t.me/rsksmartcontract" rel="nofollow noopener noreferrer" target="_blank" class="instagram"><i class="fab fa-telegram"></i></a>
                        <a href="https://www.instagram.com/rsksmart/" rel="nofollow noopener noreferrer" target="_blank" class=""><i class="fab fa-instagram"></i></a>
                        <a href="https://bitcointalk.org/index.php?topic=5124334" rel="nofollow noopener noreferrer" target="_blank" class=""><i class="fab fa-btc"></i></a>
                     </div>
                  </div>
               </div>
            </div>
            <div class="container">
               <div class="col-md-12">
                  <div class="row">
                     <div class="col-md-6 col-xs-12 pl-0-mobile">
                        <p class="copyright">Copyright © 2015 RSK Labs. All rights reserved.</p>
                     </div>
                     <div class="col-md-6 col-xs-12 pl-0-mobile">
                        <p class="credits"> RSK Public Key (69F6 F997 2497 8762 D541 8AE4 58D2 260D 5998 6758)</p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
        </footer>
        <div id="js">
            <!-- jQuery first, then Popper.js, then Bootstrap JS -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js" integrity="sha512-/DXTXr6nQodMUiq+IUJYCt2PPOUjrHJ9wFrqpJ3XkgPNOZVfMok7cRw6CSxyCQxXn6ozlESsSh1/sMCTF1rL/g==" crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
            <!-- Bootstrap Select https://developer.snapappointments.com/bootstrap-select/ -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js" integrity="sha384-SfMwgGnc3UiUUZF50PsPetXLqH2HSl/FmkMW/Ja3N2WaJ/fHLbCHPUsXzzrM6aet" crossorigin="anonymous"></script>
            <!-- Updated Web3.js as MetaMsak uses 0.20.7 version -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.2.2/web3.min.js" integrity="sha384-5twr//DBZLxyCKhyQ993lJO6PM05f8HW/rTdv6zWhe8xgS8XAHH15oIcGFBTdwmM" crossorigin="anonymous"></script>
            <!-- bignumber.js -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/bignumber.js/9.0.0/bignumber.min.js" integrity="sha384-W92bSiy/NxoN+p5YNhm8ybWnIFnqtH0/Bxc4l9jojSsPK2KQdOvQonrRBon0O/om" crossorigin="anonymous"></script>
            <!-- Copy to Clipboard https://clipboardjs.com/ -->
            <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha384-8CYhPwYlLELodlcQV713V9ZikA3DlCVaXFDpjHfP8Z36gpddf/Vrt47XmKDsCttu" crossorigin="anonymous"></script>
            <!-- rLogin -->
            <script src="https://unpkg.com/@rsksmart/rlogin@0.1.1/dist/main.js" integrity="sha384-BxkfkiqvSWCwmBJpdpHlhY1vJDZj/fYQI76nvqsTCMoYgoJEWGXQW2O/1wqNeudb" crossorigin="anonymous"></script>
            <!-- Wallet Connect -->
            <script src="https://unpkg.com/@walletconnect/web3-provider@1.3.1/dist/umd/index.min.js" integrity="sha384-DOJahViDNA9y40Y+NIb/qcO4Cxfe58MRJvtlIzdHdHRrnnhppgFGnipStRNW2DXG" crossorigin="anonymous"></script>
           <!-- async-await-retry  https://github.com/VoodooTeam/async-await-retry -->
            <script>
                const getPromise = (fn, args) => {
                    return new Promise((resolve, reject) => {
                        if (!args) args = [];
                        args.push((err, data) => {
                            if (err) return reject(err);
                            return resolve(data);
                        });
                        fn.apply(null, args);
                    });
                };

                const clone = (obj) => {
                    if (obj === null || typeof obj !== "object") {
                        return obj;
                    } else if (Array.isArray(obj)) {
                        let clonedArr = [];
                        for (const data of obj) {
                            clonedArr.push(clone(data));
                        }
                        return clonedArr;
                    } else {
                        let clonedObj = {};
                        const keys = Object.keys(obj);
                        for (const key of keys) {
                            clonedObj[key] = clone(obj[key]);
                        }
                        return clonedObj;
                    }
                }

                /**
                 * Retry system with async / await
                 *
                 * @param {Function} fn : function to execute
                 * @param {Array} args : arguments of fn function
                 * @param {Object} config : arguments of fn function
                 * @property {Number} config.retriesMax : number of retries, by default 3
                 * @property {Number} config.interval : interval (in ms) between retry, by default 0
                 * @property {Boolean} config.exponential : use exponential retry interval, by default true
                 * @property {Number} config.factor: interval incrementation factor
                 * @property {Number} config.isCb: is fn a callback style function ?
                 */
                async function retry(fn, args = [], config = {}) {
                    const retriesMax = config.retriesMax || 3;
                    let interval = config.interval || 0;
                    const exponential = config.hasOwnProperty('exponential') ? config.exponential : true;
                    const factor = config.factor || 2;

                    for (let i = 0; i < retriesMax; i++) {
                        try {
                            if (!config.isCb) {
                                const val = await fn.apply(null, args);
                                return val;
                            } else {
                                const val = await getPromise(fn, clone(args));
                                return val;
                            }
                        } catch (error) {
                            if(retriesMax === i+1 || (error.hasOwnProperty('retryable') && !error.retryable)) throw error;

                            interval = exponential ? interval * factor : interval;
                            // if interval is set to zero, do not use setTimeout, gain 1 event loop tick
                            if (interval) await new Promise(r => setTimeout(r, interval));
                        }
                    }
                };
                async function retry3Times(func, params = null) {
                    return retry(func, params, {retriesMax: 3, interval: 1_000, exponential: false});
                }
            </script>
            <!-- Custom Js -->
            <script type="text/javascript">
                //User
                let address = '';
                //Network configuration
                let config = null;
                let isTestnet = true;
                let allowTokensContract = null;
                let bridgeContract = null;
                let federationContract = null;
                let minTokensAllowed = 1;
                let maxTokensAllowed = 100_000;
                let maxDailyLimit = 1_000_000;
                // Selected Token To Cross
                let tokenContract = null;
                let isSideToken = false;
                let sideTokenAddress = null;
                let fee = 0;
                let feePercentage = 0;
                let feePercentageDivider = 10_000;
                let rLogin;

                $(document).ready(function() {
                    new ClipboardJS('.copy');
                    $('[data-toggle="tooltip"]').tooltip();
                    $('.selectpicker').selectpicker();

                    isTestnet = window.location.href.includes('testnet');
                    if(isTestnet) {
                        $('#title').text('RSK Testnet bridges with Ethereum Kovan');
                        let navlink = $('#network-navlink');
                        navlink.prop('href', 'https://tokenbridge.rsk.co');
                        navlink.text('Use Mainnet');
                        navlink = $('#get-rbtc-navlink');
                        navlink.prop('href', 'https://faucet.rsk.co/');
                    }

                    if(!/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())
                        && navigator.userAgent.indexOf("Firefox") == -1 ) {
                        alert('This site will only work correctly under chrome, chromium or firefox');
                    }

                    disableInputs(true);

                    $('#logIn').attr('onclick', 'onLogInClick()');

                    let rpc = {
                        1: 'https://mainnet.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0',
                        30: 'https://public-node.rsk.co',
                    };
                    supportedChains = [1,30];
                    if(isTestnet) {
                        rpc = {
                            42: 'https://kovan.infura.io/v3/8043bb2cf99347b1bfadfb233c5325c0',
                            31: 'https://public-node.testnet.rsk.co',
                        };
                        supportedChains = [42,31];
                    }
                    rLogin = new window.RLogin.default({
                        cacheProvider: false,
                        providerOptions: {
                            walletconnect: {
                                package: window.WalletConnectProvider.default,
                                options: {
                                    rpc: rpc
                                }
                            }
                        },
                        supportedChains: supportedChains
                    });

                    $('#tokenAddress').change(function(event) {
                        cleanAlertSuccess();
                        let token = TOKENS.find(element => element.token == event.currentTarget.value);
                        if(token) {
                            $('.selectedToken').html(token[config.networkId].symbol);
                            let html = `<a target="_blank" href="${config.crossToNetwork.explorer}/address/${token[config.crossToNetwork.networkId].address.toLowerCase()}">`;
                            html += `\n   <span><img src="${token.icon}" class="token-logo"></span>${token[config.crossToNetwork.networkId].symbol}`;
                            html += `\n </a>`
                            $('#willReceiveToken').html(html);
                            $('#willReceive-copy').show();
                            $('#willReceive-copy').attr('data-clipboard-text', token[config.crossToNetwork.networkId].address);
                            if($('#amount').val()) {
                                isAmountOk();
                            }
                        } else {
                            $('.selectedToken').html('');
                            $('#willReceive').html('');
                            $('#willReceive-copy').hide();
                        }
                    });
                    $('#amount').keyup(isAmountOk);
                    $('#amount').keypress(function(event) {
                        if(event.key !== '.' && (event.key < '0' || event.key > '9'))
                            return false;
                    });
                    $('#crossForm').on('submit', function(e) {
                        e.preventDefault();
                        crossToken();
                    });
                    $('#changeNetwork').on('click', function() {
                        if(config) {
                            var connectToNetwork = '';
                            if(isTestnet) {
                                if(config.crossToNetwork.networkId == 42) {
                                    connectToNetwork = 'Ethereum Kovan';
                                } else {
                                    connectToNetwork = 'RSK Testnet';
                                }
                            } else {
                                if(config.crossToNetwork.networkId == 1) {
                                    connectToNetwork = 'Ethereum Mainnet';
                                } else {
                                    connectToNetwork = 'RSK Mainnet';
                                }
                            }
                            updateNetworkConfig(config.crossToNetwork);
                            var err = new Error(`Switch the Network.<br /> Please connect your wallet to <b>${connectToNetwork}</b>`);
                            onMetaMaskConnectionError(err);
                        }
                    });
                    updateTokenListTab();
                    // isInstalled(); - uncomment to show popup on page load
                });

                async function waitForReceipt(txHash) {
                    let timeElapsed = 0;
                    let interval = 10_000;
                    return new Promise((resolve, reject) => {
                        const checkInterval = setInterval(async () => {
                            timeElapsed += interval;
                            let receipt = await web3.eth.getTransactionReceipt(txHash);
                            if(receipt != null) {
                                clearInterval(checkInterval);
                                resolve(receipt);
                            }
                            if(timeElapsed > 90_000) {
                                reject(new Error(`Operation took too long <a target="_blank" href="${config.explorer}/tx/${txHash}">check Tx on the explorer</a>`));
                            }
                        }, interval);
                    });
                }

                function onLogInClick() {
                    debugger
                    if(!config) {
                        $('#logIn').html('<i class="fas fa-sync fa-spin">');
                        $('#logIn').attr('onclick', '');
                        isInstalled()
                        .catch( (err) => {
                            onMetaMaskConnectionError(typeof err === 'string' ? { message: err } : err);
                        });
                    }
                }

                async function setInfoTab() {
                  try {
                    // Dinamically get the values, this is comented as the public node some times throws errors
                    [maxWithdraw, maxAllowed, minAllowed, federators] = await Promise.all([
                      retry3Times(allowTokensContract.methods.dailyLimit().call),
                      retry3Times(allowTokensContract.methods.getMaxTokensAllowed().call),
                      retry3Times(allowTokensContract.methods.getMinTokensAllowed().call),
                      retry3Times(federationContract.methods.getMembers().call),
                    ]);
                    minTokensAllowed = parseInt(web3.utils.fromWei(minAllowed, 'ether'));
                    maxTokensAllowed = parseInt(web3.utils.fromWei(maxAllowed, 'ether'));
                    maxDailyLimit = parseInt(web3.utils.fromWei(maxWithdraw, 'ether'));

                    feePercentage = await retry3Times(bridgeContract.methods.getFeePercentage().call);
                    fee = feePercentage/feePercentageDivider;
                    let feeFormated = (fee*100).toFixed(2) + '%';
                    let isValidatingAllowedTokens = true;

                    $('#fee').html(feeFormated);
                    $('#config-fee').text(feeFormated);
                    $('#config-min').text(minTokensAllowed.toLocaleString());
                    $('#config-max').text(maxTokensAllowed.toLocaleString());
                    $('#config-to-spend').text(maxDailyLimit.toLocaleString());
                    $('#config-federators-count').text(federators.length);
                    $('#config-federators-required').text(`(${Math.floor((federators.length / 2) + 1)} required)`);
                    $('#config-whitelisted-enabled').text(isValidatingAllowedTokens);

                  } catch (err) {
                    console.error('Error setting info tab ', err);
                  }
                }

                async function getMaxBalance(event) {
                    if(event)
                        event.preventDefault();
                    let tokenToCross = $('#tokenAddress').val();
                    let token = TOKENS.find(element => element.token == tokenToCross);
                    if(!token) {
                        return;
                    }
                    const tokenAddress = token[config.networkId].address;
                    tokenContract = new web3.eth.Contract(ERC20_ABI, tokenAddress);

                    const decimals = token[config.networkId].decimals;
                    return retry3Times(tokenContract.methods.balanceOf(address).call)
                    .then(async (balance) => {
                        balanceBNs = new BigNumber(balance).shiftedBy(-decimals);
                        let maxWithdrawInWei = await retry3Times(bridgeContract.methods.calcMaxWithdraw().call);
                        let maxWithdraw = new BigNumber(web3.utils.fromWei(maxWithdrawInWei, 'ether'));
                        let maxValue = 0;
                        if( balanceBNs.isGreaterThan(maxWithdraw)) {
                            maxValue = maxWithdraw;
                        } else {
                            maxValue = balanceBNs;
                        }
                        let serviceFee = new BigNumber(maxValue).times(fee);
                        let value = maxValue.minus(serviceFee).toFixed(decimals, BigNumber.ROUND_DOWN);
                        $('#amount').val(value.toString());
                        $('#amount').keyup();
                    });
                }

                async function crossToken() {
                    cleanAlertError();
                    cleanAlertSuccess();
                    var tokenToCross = $('#tokenAddress').val();
                    var token = TOKENS.find(element => element.token == tokenToCross);
                    if(!token) {
                        crossTokenError('Choose a token to cross');
                        return;
                    }
                    const tokenAddress = token[config.networkId].address;
                    tokenContract = new web3.eth.Contract(ERC20_ABI, tokenAddress);
                    const BN = web3.utils.BN;

                    const amount = $('#amount').val();
                    if(!amount) {
                        crossTokenError('Complete the Amount field');
                        return;
                    }
                    if($('#amount').hasClass('is-invalid')) {
                        crossTokenError('Invalid Amount');
                        return;
                    }
                    const decimals = token[config.networkId].decimals;
                    const splittedAmount = amount.split('.');
                    var amountWithDecimals = splittedAmount[0];
                    for(i=0; i < decimals; i++) {
                        if(splittedAmount[1] && i < splittedAmount[1].length) {
                            amountWithDecimals += splittedAmount[1][i];
                        } else {
                            amountWithDecimals += '0';
                        }

                    }
                    const amountBN = new BN(amountWithDecimals).mul(new BN(feePercentageDivider)).div(new BN(feePercentageDivider - feePercentage));
                    const amountFeesBN = fee == 0 ? amountBN : amountBN.mul(new BN(feePercentage)).div(new BN(feePercentageDivider));

                    disableInputs(true);
                    $('.fees').hide();
                    $('#secondsPerBlock').text(config.secondsPerBlock);
                    $('#wait').show();
                    let gasPrice = '';

                    return retry3Times(tokenContract.methods.balanceOf(address).call)
                    .then(async (balance) => {
                        const balanceBN = new BN(balance);
                        if(balanceBN.lt(amountBN)) {
                            const showBalance = new BigNumber(balance);
                            throw new Error(`Insuficient Balance in your account, your current balance is ${showBalance.shiftedBy(-decimals)} ${token[config.networkId].symbol}`);
                        }
                        let maxWithdrawInWei = await retry3Times(bridgeContract.methods.calcMaxWithdraw().call);
                        const maxWithdraw = new BN(maxWithdrawInWei);
                        if(amountBN.gt(maxWithdraw)) {
                            throw new Error(`Amount bigger than the daily limit. Daily limit left ${web3.utils.fromWei(maxWithdrawInWei, 'ether')} tokens`);
                        }

                        var gasPriceParsed = 0;
                        if(config.networkId >= 30 && config.networkId <= 33) {
                            let block = await web3.eth.getBlock('latest');
                            gasPriceParsed= parseInt(block.minimumGasPrice);
                            gasPriceParsed = gasPriceParsed <= 1 ? 1: gasPriceParsed * 1.03;
                        } else {
                            let gasPriceAvg = await web3.eth.getGasPrice();
                            gasPriceParsed= parseInt(gasPriceAvg);
                            gasPriceParsed = gasPriceParsed <= 1 ? 1: gasPriceParsed * 1.3;
                        }
                        gasPrice = `0x${Math.ceil(gasPriceParsed).toString(16)}`;
                    }).then(async () => {
                        return new Promise((resolve, reject) => {
                            tokenContract.methods.approve(bridgeContract.options.address, amountBN.toString()).send({from: address, gasPrice:gasPrice, gas:70_000}, async (err, txHash) => {
                                if (err) return reject(err);
                                try {
                                    let receipt = await waitForReceipt(txHash);
                                    if(receipt.status) {
                                        //iconSuccess(currentStep,`<a target="_blank" href="${config.explorer}/tx/${txHash}">Approve successful see Tx</a>`);
                                        resolve(receipt);
                                    }
                                } catch(err) {
                                    reject(err);
                                }
                                reject(new Error(`Execution failed <a target="_blank" href="${config.explorer}/tx/${txHash}">see Tx</a>`));
                            });
                        });
                    }).then(async () => {
                        return new Promise((resolve, reject) => {
                            bridgeContract.methods.receiveTokens(tokenContract.options.address, amountBN.toString()).send({from: address, gasPrice:gasPrice, gas:200_000}, async (err, txHash) => {
                                if (err) return reject(err);
                                try {
                                    let receipt = await waitForReceipt(txHash);
                                    $('#cross').prop('disabled', false);
                                    if(receipt.status) {
                                        resolve(receipt);
                                    }
                                } catch(err) {
                                    reject(err);
                                }
                                reject(new Error(`Execution failed <a target="_blank" href="${config.explorer}/tx/${txHash}">see Tx</a>`));
                            });
                        });
                    }).then(async (receipt) => {
                        $('#wait').hide();
                        $('#confirmationTime').text(config.confirmationTime);
                        $('#receive').text(`${amount} ${token[config.crossToNetwork.networkId].symbol}`);
                        //$('#txBridge').attr('href', `${config.explorer}/tx/${receipt.transactionHash}`);
                        $('#success').show();
                        disableInputs(false);
                    }).catch((err) => {
                        $('#wait').hide();
                        console.error(err);
                        crossTokenError(`Couln't cross the tokens. ${err.message}`);
                    });
                }

                function cleanAlertSuccess() {
                    $('#success').hide();
                }

                function cleanAlertError() {
                    $('#alert-danger-text').html('');
                    $('#alert-danger').hide();
                }

                function crossTokenError(err) {
                    $('#alert-danger-text').html(err);
                    $('#alert-danger').show();
                    $('#alert-danger').focus();
                    $('#cross').prop('disabled', false);
                    disableInputs(false);
                }

                async function isAmountOk() {
                    cleanAlertSuccess();
                    let amount = $('#amount').val();
                    if(amount == '') {
                        markInvalidAmount('Invalid amount');
                        return;
                    }
                    let parsedAmount = new BigNumber(amount);
                    if(parsedAmount <= 0) {
                        markInvalidAmount("Must be bigger than 0");
                        return;
                    }
                    $('#amount').removeClass('ok');
                    let totalCost = fee == 0 ? parsedAmount : parsedAmount.dividedBy(1-fee);
                    let serviceFee = totalCost.times(fee);

                    $('#serviceFee').html(serviceFee.toFormat(6, BigNumber.ROUND_DOWN));
                    $('#totalCost').html(totalCost.toFormat(6, BigNumber.ROUND_DOWN));
                    try {
                        if(totalCost < minTokensAllowed) {
                            throw new Error(`Minimum amount ${minTokensAllowed - minTokensAllowed*fee} token`);
                        }
                        if(totalCost > maxTokensAllowed) {
                            throw new Error(`Max amount ${maxTokensAllowed  - maxTokensAllowed*fee} tokens`);
                        }
                        $('.amount .invalid-feedback').hide();
                        $('#amount').removeClass('is-invalid');
                        $('#amount').addClass('ok');
                        $('.fees').show();
                    } catch(err) {
                        markInvalidAmount(err.message);
                    }
                }

                function markInvalidAmount(errorDescription) {
                    let invalidAmount = $('.amount .invalid-feedback');
                    invalidAmount.html(errorDescription);
                    invalidAmount.show();
                    $('#amount').addClass('is-invalid');
                    $('#amount').prop("disabled", false);
                    $('#amount').removeClass('ok');
                    $('.fees').hide();
                }

                async function isInstalled() {
                    if (window.ethereum) {
                        window.ethereum.autoRefreshOnNetworkChange = false;
                    }

                    const provider = await rLogin.connect()
                        .catch(() => { throw new Error('Login failed. Please try again.') })
                    window.web3 = new Web3(provider);
                    let accounts = await getAccounts();
                    let chainId = await web3.eth.net.getId();
                    await updateCallback(chainId, accounts);
                    //web3.currentProvider.publicConfigStore.on('update', updateCallback);
                    provider.on('chainChanged', updateNetwork);
                    provider.on('accountsChanged', updateAddress);
                    return chainId;
                }

                function onMetaMaskConnectionError(err) {
                    $('#myModal .modal-body').html(`<p>${err.message}</p>`);
                    $('#myModal').modal('show');
                    $('#logIn').attr('onclick', 'onLogInClick()');
                    $('#logIn').text('Connect wallet');
                    $('#logIn').show();
                    $('#transferTab').addClass('disabled');
                    $('#help').hide();
                    $('.wallet-status').hide();
                    $('#address').text('0x00000..');
                    disableInputs(true);
                    tokenContract = null;
                    allowTokensContract = null;
                    bridgeContract = null;
                    config = null;
                    address = '';
                }

                function disableInputs(disable) {
                    $('#cross').prop('disabled', disable);
                    $("#tokenAddress").prop('disabled', disable);
                    $("button[data-id='tokenAddress']").prop('disabled', disable);
                    $('#amount').prop('disabled', disable);
                    if(disable) {
                        $('#max').off('click');
                        $('#max').removeAttr('href');
                    } else {
                        $('#max').on('click', getMaxBalance);
                        $('#max').attr('href', '#');
                    }
                }

                function onMetaMaskConnectionSuccess() {
                    disableInputs(false);
                }

                function updateAddress(newAddresses) {
                    address = newAddresses[0];
                    $('#address').text(address);
                    $('#logIn').hide();
                    $('#transferTab').removeClass('disabled');
                    $('#help').show();
                    $('.wallet-status').show();
                }

                async function updateCallback(chainId, accounts) {
                    return updateNetwork(chainId).then( () =>
                        updateAddress(accounts)
                    );
                }

                function updateNetworkConfig(config) {
                    $('.fromNetwork').text(config.name);
                    $('.indicator span').html(config.name);
                    $('.indicator').removeClass('btn-outline-danger');
                    $('.indicator').addClass('btn-outline-success');
                    $('.toNetwork').text(config.crossToNetwork.name);
                    $('#confirmations').html(config.confirmations);
                    updateTokenAddressDropdown(config.networkId);
                }

                async function updateNetwork(newNetwork) {
                    cleanAlertSuccess();
                    try {
                        newNetwork = parseInt(newNetwork);
                        if(config && config.networkId == newNetwork) return;

                        config = null;
                        if(isTestnet) {
                            switch (newNetwork) {
                            case 42:
                                config = KOVAN_CONFIG;
                                break;
                            case 31:
                                config = RSK_TESTNET_CONFIG;
                                break;
                            }
                        } else {
                            switch (newNetwork) {
                            case 1:
                                config = ETH_CONFIG;
                                break;
                            case 30:
                                config = RSK_MAINNET_CONFIG;
                                break;
                            }
                        }
                        if(config == null) {
                            $('.fromNetwork').text('From Network');
                            $('.indicator span').html('Unknown Network');
                            $('.indicator').removeClass('btn-outline-success');
                            $('.indicator').addClass('btn-outline-danger');
                            $('.toNetwork').text('To Network');
                            $('#willReceiveToken').html('');
                            throw new Error(`Wrong Network.<br /> Please connect your wallet to <b>${isTestnet ? 'RSK Testnet or Ethereum Kovan' : 'RSK Mainnet or Ethereum Mainnet'}</b>`);
                        }
                        allowTokensContract = new web3.eth.Contract(ALLOW_TOKENS_ABI, config.allowTokens);
                        bridgeContract = new web3.eth.Contract(BRIDGE_ABI, config.bridge);
                        federationContract = new web3.eth.Contract(FEDERATION_ABI, config.federation);

                        $('#myModal').modal('hide');
                        updateNetworkConfig(config);
                        updateTokenAddressDropdown(config.networkId);

                        setInfoTab();
                        onMetaMaskConnectionSuccess();
                    } catch(err) {
                        onMetaMaskConnectionError(err);
                        throw err;
                    };
                }

                function updateTokenAddressDropdown(networkId) {
                    let selectHtml = '';
                    for(let aToken of TOKENS) {
                        if(aToken[networkId] != undefined) {
                            selectHtml += `\n<option value="${aToken.token}" `;
                            selectHtml += `data-content="<span><img src='${aToken.icon}' class='token-logo'></span>${aToken[networkId].symbol}">`;
                            selectHtml += `\n</option>`;
                        }
                    }
                    $('#tokenAddress').html(selectHtml);
                    $('#tokenAddress').prop('disabled', false);
                    $('#tokenAddress').selectpicker('refresh');
                }

                function updateTokenListTab() {
                    let rskConfig = RSK_TESTNET_CONFIG;
                    if(!isTestnet)
                        rskConfig = RSK_MAINNET_CONFIG;

                    let tabHtml = `<div class="row mb-3 justify-content-center text-center">`;
                    tabHtml += `\n    <div class="col-5">`;
                    tabHtml += `\n        ${rskConfig.name}`;
                    tabHtml += `\n    </div>`;
                    tabHtml += `\n    <div class="col-1"></div>`;
                    tabHtml += `\n    <div class="col-5">`;
                    tabHtml += `\n        ${rskConfig.crossToNetwork.name}`;
                    tabHtml += `\n    </div>`;
                    tabHtml += `\n</div>`;
                    for(let aToken of TOKENS) {
                        if(aToken[rskConfig.networkId] != undefined) {
                            tabHtml += `\n<div class="row mb-3 justify-content-center">`;
                            tabHtml += `\n    <div class="col-5 row">`;
                            tabHtml += `\n      <div class="col-8 font-weight-bold">`;
                            tabHtml += `\n          <a href="${rskConfig.explorer}/address/${aToken[rskConfig.networkId].address.toLowerCase()}" class="address" target="_blank">`;
                            tabHtml += `\n            <span><img src="${aToken.icon}" class="token-logo"></span>${aToken[rskConfig.networkId].symbol}`;
                            tabHtml += `\n          </a>`;
                            tabHtml += `\n       </div>`;
                            tabHtml += `\n       <div class="col-4">`;
                            tabHtml += `\n           <button class="copy btn btn-outline-secondary" type="button" data-clipboard-text="${aToken[rskConfig.networkId].address.toLowerCase()}" data-toggle="tooltip" data-placement="bottom" title="Copy token address to clipboard">`;
                            tabHtml += `\n                <i class="far fa-copy"></i>`;
                            tabHtml += `\n           </button>`;
                            tabHtml += `\n       </div>`;
                            tabHtml += `\n    </div>`;
                            tabHtml += `\n    <div class="col-2 text-center">`;
                            tabHtml += `\n        <i class="fas fa-arrows-alt-h"></i>`;
                            tabHtml += `\n    </div>`;
                            tabHtml += `\n    <div class="col-5 row">`;
                            tabHtml += `\n      <div class="col-8 font-weight-bold">`;
                            tabHtml += `\n          <a href="${rskConfig.crossToNetwork.explorer}/address/${aToken[rskConfig.crossToNetwork.networkId].address.toLowerCase()}" class="address" target="_blank">`;
                            tabHtml += `\n              <span><img src="${aToken.icon}" class="token-logo"></span>${aToken[rskConfig.crossToNetwork.networkId].symbol}`;
                            tabHtml += `\n          </a>`;
                            tabHtml += `\n      </div>`;
                            tabHtml += `\n      <div class="col-4">`;
                            tabHtml += `\n          <button class="copy btn btn-outline-secondary" type="button" data-clipboard-text="${aToken[rskConfig.crossToNetwork.networkId].address.toLowerCase()}" data-toggle="tooltip" data-placement="bottom" title="Copy the address">`;
                            tabHtml += `\n              <i class="far fa-copy"></i>`;
                            tabHtml += `\n          </button>`;
                            tabHtml += `\n      </div>`;
                            tabHtml += `\n    </div>`;
                            tabHtml += `\n</div>`;
                        }
                    }
                    $('#tokenListTab').html(tabHtml);
                }

                async function getAccounts() {
                    let accounts = await web3.eth.getAccounts();
                    if (accounts.length === 0)
                        throw new Error('Nifty Wallet or MetaMask is Locked, please unlock it and Reload the page to continue');
                    return accounts;
                }

                // --------- CONFIGS ----------
                let KOVAN_CONFIG = {
                    networkId: 42,
                    name: 'Ethereum Kovan',
                    bridge: '0x85b237ca38dd0a227acb925b02e5d64b9d48c89a',
                    allowTokens: '0xea00f15afb67e14e6441c5590b43b0e39add5b67',
                    federation: '0x471fd8b0edc3a7a77d3db54a6bab13d2cbf2b11f',
                    explorer: 'https://kovan.etherscan.io',
                    explorerTokenTab: '#tokentxns',
                    confirmations: 10,
                    confirmationTime: '5 minutes',
                    secondsPerBlock: 5,
                };
                let RSK_TESTNET_CONFIG = {
                    networkId: 31,
                    name: 'RSK Testnet',
                    bridge: '0x5f6ef2adae571aad2d08ba1bb1fa5d25a234dddc',
                    allowTokens: '0xb7c9c54a82bcb7216db2d8876b7b197baf02061f',
                    federation: '0x70e7db3986fd4235b2da4a380ea162b57ca5ee77',
                    explorer: 'https://explorer.testnet.rsk.co',
                    explorerTokenTab: '?__tab=tokens%20transfers',
                    confirmations: 10,
                    confirmationTime: '5 minutes',
                    secondsPerBlock: 30,
                    crossToNetwork: KOVAN_CONFIG
                };
                KOVAN_CONFIG.crossToNetwork = RSK_TESTNET_CONFIG;

                // Replace with proper values contracts exist in mainnet
                let ETH_CONFIG = {
                    networkId: 1,
                    name: 'ETH Mainnet',
                    bridge: "0x12ed69359919fc775bc2674860e8fe2d2b6a7b5d",
                    allowTokens: "0xe4aa0f414725c9322a1a9d80d469c5e234786653",
                    federation: "0x42e4435337fe90220c536dfcda74026ed02ab843",
                    explorer: 'https://etherscan.io',
                    explorerTokenTab: '#tokentxns',
                    confirmations: 5760,
                    confirmationTime: '24 hours',
                    secondsPerBlock: 15,
                };
                let RSK_MAINNET_CONFIG = {
                    networkId: 30,
                    name: 'RSK Mainnet',
                    bridge: "0x9d11937e2179dc5270aa86a3f8143232d6da0e69",
                    allowTokens: "0xe4aa0f414725c9322a1a9d80d469c5e234786653",
                    federation: "0xf340e32b712ff23ee6659e32e926e831407d8b9a",
                    explorer: 'https://explorer.rsk.co',
                    explorerTokenTab: '?__tab=tokens%20transfers',
                    confirmations: 2880,
                    confirmationTime: '24 hours',
                    secondsPerBlock: 30,
                    crossToNetwork: ETH_CONFIG
                };
                ETH_CONFIG.crossToNetwork = RSK_MAINNET_CONFIG;
                // --------- CONFIGS  END --------------

                // --------- ABI --------------
                const BRIDGE_ABI = [{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_tokenAddress","type":"address"},{"indexed":true,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"_decimals","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"_granularity","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_formattedAmount","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"_calculatedDecimals","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"_calculatedGranularity","type":"uint256"}],"name":"AcceptedCrossTransfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_tokenAddress","type":"address"},{"indexed":true,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"},{"indexed":false,"internalType":"string","name":"_symbol","type":"string"},{"indexed":false,"internalType":"bytes","name":"_userData","type":"bytes"},{"indexed":false,"internalType":"uint8","name":"_decimals","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"_granularity","type":"uint256"}],"name":"Cross","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newFederation","type":"address"}],"name":"FederationChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"FeePercentageChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_newSideTokenAddress","type":"address"},{"indexed":true,"internalType":"address","name":"_originalTokenAddress","type":"address"},{"indexed":false,"internalType":"string","name":"_newSymbol","type":"string"},{"indexed":false,"internalType":"uint256","name":"_granularity","type":"uint256"}],"name":"NewSideToken","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Paused","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"}],"name":"PauserAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"}],"name":"PauserRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newSideTokenFactory","type":"address"}],"name":"SideTokenFactoryChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"account","type":"address"}],"name":"Unpaused","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"isUpgrading","type":"bool"}],"name":"Upgrading","type":"event"},{"constant":false,"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"addPauser","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"allowTokens","outputs":[{"internalType":"contract AllowTokens","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"feePercentageDivider","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"isPauser","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isUpgrading","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"knownTokens","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"lastDay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"mappedTokens","outputs":[{"internalType":"contract ISideToken","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"originalTokens","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"pause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"paused","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"processed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"renounceOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"renouncePauser","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"sideTokenFactory","outputs":[{"internalType":"contract ISideTokenFactory","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"spentToday","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbolPrefix","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"unpause","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_manager","type":"address"},{"internalType":"address","name":"_federation","type":"address"},{"internalType":"address","name":"_allowTokens","type":"address"},{"internalType":"address","name":"_sideTokenFactory","type":"address"},{"internalType":"string","name":"_symbolPrefix","type":"string"}],"name":"initialize","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"initialize","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"sender","type":"address"}],"name":"initialize","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"bytes32","name":"blockHash","type":"bytes32"},{"internalType":"bytes32","name":"transactionHash","type":"bytes32"},{"internalType":"uint32","name":"logIndex","type":"uint32"},{"internalType":"uint8","name":"decimals","type":"uint8"},{"internalType":"uint256","name":"granularity","type":"uint256"}],"name":"acceptTransfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"tokenToUse","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"receiveTokens","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"userData","type":"bytes"},{"internalType":"bytes","name":"","type":"bytes"}],"name":"tokensReceived","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"_blockHash","type":"bytes32"},{"internalType":"bytes32","name":"_transactionHash","type":"bytes32"},{"internalType":"address","name":"_receiver","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint32","name":"_logIndex","type":"uint32"}],"name":"getTransactionId","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"setFeePercentage","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getFeePercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"calcMaxWithdraw","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"newFederation","type":"address"}],"name":"changeFederation","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getFederation","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"newSideTokenFactory","type":"address"}],"name":"changeSideTokenFactory","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"startUpgrade","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"endUpgrade","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]
                const ALLOW_TOKENS_ABI = [{"inputs":[{"internalType":"address","name":"_manager","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"AllowedTokenAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_tokenAddress","type":"address"}],"name":"AllowedTokenRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"_enabled","type":"bool"}],"name":"AllowedTokenValidation","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"dailyLimit","type":"uint256"}],"name":"DailyLimitChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_maxTokens","type":"uint256"}],"name":"MaxTokensAllowedChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_minTokens","type":"uint256"}],"name":"MinTokensAllowedChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"allowedTokens","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"dailyLimit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"renounceOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"isValidatingAllowedTokens","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getMaxTokensAllowed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getMinTokensAllowed","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"isTokenAllowed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"addAllowedToken","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"removeAllowedToken","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"enableAllowedTokensValidation","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"disableAllowedTokensValidation","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"maxTokens","type":"uint256"}],"name":"setMaxTokensAllowed","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"minTokens","type":"uint256"}],"name":"setMinTokensAllowed","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"_dailyLimit","type":"uint256"}],"name":"changeDailyLimit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"tokenToUse","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"spentToday","type":"uint256"},{"internalType":"bool","name":"isSideToken","type":"bool"}],"name":"isValidTokenTransfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"uint256","name":"spentToday","type":"uint256"}],"name":"calcMaxWithdraw","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}];

                const ERC20_ABI = [{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"uint8","name":"decimals","type":"uint8"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"}];

                const FEDERATION_ABI = [{"inputs":[{"internalType":"address[]","name":"_members","type":"address[]"},{"internalType":"uint256","name":"_required","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"bridge","type":"address"}],"name":"BridgeChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"transactionId","type":"bytes32"}],"name":"Executed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"member","type":"address"}],"name":"MemberAddition","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"member","type":"address"}],"name":"MemberRemoval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"required","type":"uint256"}],"name":"RequirementChange","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"bytes32","name":"transactionId","type":"bytes32"},{"indexed":false,"internalType":"address","name":"originalTokenAddress","type":"address"},{"indexed":false,"internalType":"address","name":"receiver","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"string","name":"symbol","type":"string"},{"indexed":false,"internalType":"bytes32","name":"blockHash","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"transactionHash","type":"bytes32"},{"indexed":false,"internalType":"uint32","name":"logIndex","type":"uint32"},{"indexed":false,"internalType":"uint8","name":"decimals","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"granularity","type":"uint256"}],"name":"Voted","type":"event"},{"constant":true,"inputs":[],"name":"MAX_MEMBER_COUNT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"bridge","outputs":[{"internalType":"contract IBridge_v1","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isMember","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"members","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"name":"processed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"renounceOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"required","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"},{"internalType":"address","name":"","type":"address"}],"name":"votes","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_bridge","type":"address"}],"name":"setBridge","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"originalTokenAddress","type":"address"},{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"bytes32","name":"blockHash","type":"bytes32"},{"internalType":"bytes32","name":"transactionHash","type":"bytes32"},{"internalType":"uint32","name":"logIndex","type":"uint32"},{"internalType":"uint8","name":"decimals","type":"uint8"},{"internalType":"uint256","name":"granularity","type":"uint256"}],"name":"voteTransaction","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"transactionId","type":"bytes32"}],"name":"getTransactionCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"transactionId","type":"bytes32"}],"name":"hasVoted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"bytes32","name":"transactionId","type":"bytes32"}],"name":"transactionWasProcessed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"originalTokenAddress","type":"address"},{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"bytes32","name":"blockHash","type":"bytes32"},{"internalType":"bytes32","name":"transactionHash","type":"bytes32"},{"internalType":"uint32","name":"logIndex","type":"uint32"},{"internalType":"uint8","name":"decimals","type":"uint8"},{"internalType":"uint256","name":"granularity","type":"uint256"}],"name":"getTransactionId","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_newMember","type":"address"}],"name":"addMember","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"_oldMember","type":"address"}],"name":"removeMember","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getMembers","outputs":[{"internalType":"address[]","name":"","type":"address[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"_required","type":"uint256"}],"name":"changeRequirement","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}];
                // --------- ABI  END --------------

                // --------- TOKENS --------------
                const DAI_TOKEN = { token: 'DAI', name: 'Dai Stablecoin', icon: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0x6B175474E89094C44Da98b954EedeAC495271d0F/logo.png',
                    31:{symbol:'rDAI', address:'0x9148c558eac5aedee9d84b4c3f3754dd49bf0b3b', decimals:18},
                    42:{symbol:'DAI', address:'0x832915943cc51c0620f32dfbaf8b9addb0db25e1', decimals:18}
                };

                const WETH_TOKEN = { token: 'WETH', name: 'Wrapped Ether', icon: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png',
                    31:{symbol:'rWETH', address:'0x0057e76d6b2da3d991fae054c4dd2f05bdc5a111', decimals:18},
                    42:{symbol:'WETH', address:'0xc5cdbf9c69f80fdf0c94aafd0b6b18cec771d7e9', decimals:18},
                };

                const USDT_TOKEN = { token: 'USDT', name: 'Tether USD', icon: 'https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/ethereum/assets/0xdAC17F958D2ee523a2206206994597C13D831ec7/logo.png',
                    31:{symbol:'rUSDT', address:'0x157e66d1c3653a7cf56f16a0c5923425a738e471', decimals:18},
                    42:{symbol:'USDT', address:'0x755de969cbc0e7df97eac28933c6a2385c087ca1', decimals:6},
                };

                const RENBTC_TOKEN = { token: 'RenBTC', name: 'Ren BTC', icon:'https://etherscan.io/token/images/renbtc_32.png',
                    31:{symbol: 'rRenBTC', address: '0x8ee826ec63e9f36c25759df5b011163b1109eb57', decimals: 18},
                    42:{symbol: 'RenBTC', address: '0xe59ea5df422a143a5a9b86042ec1b0d3e8ce543a', decimals: 8},
                };

                const WBTC_TOKEN = { token: 'WBTC', name: 'Wrapped BTC', icon:'https://etherscan.io/token/images/wbtc_28.png?v=1',
                    31:{symbol: 'rWBTC', address: '0x7c733b197d17cb422f555604d8630b9f1196bc6b', decimals: 18},
                    42:{symbol: 'WBTC', address: '0xd871ce15efa071b06104dac4225540f5461d17de', decimals: 8},
                };

                // Remove INV token because its paused on mainnet
                const TOKENS = [ DAI_TOKEN, RENBTC_TOKEN, USDT_TOKEN, WBTC_TOKEN, WETH_TOKEN ];
                // --------- TOKENS  END --------------
            </script>
        </div>
    </body>
</html>
